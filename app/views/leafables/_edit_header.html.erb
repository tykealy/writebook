<nav>
  <% if leaf.book_id.present? %>
    <%= render "leaves/sidebar_toggle" %>
    <%= link_to_previous_leafable(leaf, hotkey: false, for_edit: true) %>
  <% end %>

  <div class="breadcrumbs">
    <%= render "books/index_link" %>
    <span class="flex-item-no-shrink">▸</span>
    <%= link_to container.title, book_slug_path(container) %>
    <span class="flex-item-no-shrink">▸</span>
    <% if leaf.book_id.present? %>
      <%= form_with model: [ container, leaf ], url: leafable_path(leaf), class: "flex align-center gap-half", format: :html do |form| %>
        <strong class="min-width"><%= form.text_field :title, form: "leafable-editor", class: "input full-width", autocomplete: "off" %></strong>
      <% end %>
    <% else %>
      <%= form_with model: [ leaf.article, leaf ], url: slugged_article_path(leaf.article, leaf.article.slug, leaf.id, leaf.slug), class: "flex align-center gap-half", format: :html do |form| %>
        <strong class="min-width"><%= form.text_field :title, form: "leafable-editor", class: "input full-width", autocomplete: "off" %></strong>
      <% end %>
    <% end %>
  </div>

  <button class="btn" data-action="fullscreen#toggle" data-fullscreen-target="button">
    <%= image_tag "expand.svg", aria: { hidden: true }, size: 24 %>
    <span class="for-screen-reader">Enter fullscreen</span>
  </button>

  <%= render "books/searches/search", book: @container %>
</nav>
